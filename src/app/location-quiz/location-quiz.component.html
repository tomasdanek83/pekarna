<div *ngIf="location">
    <mat-card *ngIf="location.showWelcomeMessage && !welcomeMessageDismissed">
        <mat-card-header>
            <mat-icon mat-card-avatar
                      color="accent">local_bar</mat-icon>
            <mat-card-title>Vítejte</mat-card-title>
        </mat-card-header>
        <mat-card-content>
            <p>
                Vítejte na zimní přírodovědné a rodinně-stmelovací hře, kterou jsme pro vás připravili.
            </p>
            <p>
                Budete mít za úkol projít celkem {{totalLocations}} stanovišť. Na každém z nich načtete QR kód, který
                vás přivede na webovou stránku, kde zodpovíte soutěžní otázku. Využít můžete u každé otázky až 2
                nápovědy, odpovědi zadávejte s diakritikou, na velikosti písmen nezáleží.
            </p>
            <p>
                Bez ohledu na to, jestli ji zodpovíte správně nebo ne, musíte splnit úkol, který vám bude zadán.
                Každý z úkolů, prosím, zaznamenejte na mobil (v podobě textu, fotografie, audia či videa, bude vždy
                upřesněno). Výstupy úkolů budete odevzdávat až na konci hry (klidně až z domova).
            </p>
            <p>
                V zimě se telefony při zapnutém GPS rychle vybíjí, doporučujeme tedy GPS vypínat, pokud zrovna nehledáte
                další stanoviště.
            </p>
            <p>
                Nacházíte se na chráněném území, pohybujte se prosím jen po cestách.
                V lese hrozí nebezpečí pádu stromů, dávejte si pozor na podezřelé stromy a nevyrážejte za větrného
                počasí.
            </p>
        </mat-card-content>
        <mat-card-actions>
            <button mat-button
                    color="primary"
                    (click)="onWelcomeMessageDismiss()">Zavřít</button>
        </mat-card-actions>
    </mat-card>

    <mat-card>
        <mat-card-header>
            <mat-icon mat-card-avatar
                      color="accent">school</mat-icon>
            <mat-card-title>{{location.name}} ({{location.index}}/{{totalLocations}})</mat-card-title>
            <mat-card-subtitle>Otázka</mat-card-subtitle>
        </mat-card-header>
        <mat-card-content>
            <p>{{location.question}}</p>

            <ng-container *ngIf="showFieldAndHints">
                <p [formGroup]="form">
                    <mat-form-field appearance="outline">
                        <mat-label>Vaše odpověď</mat-label>
                        <input matInput
                               [formControlName]="'answer'"
                               [attr.type]="answerFieldType"
                               (focus)="onAnswerFocus()"
                               autocomplete="off"
                               required>
                    </mat-form-field>
                </p>

                <mat-expansion-panel (opened)="hint1opened = true">
                    <mat-expansion-panel-header>
                        <mat-panel-title>
                            Nápověda 1
                        </mat-panel-title>
                    </mat-expansion-panel-header>
                    <p>{{location.hint1}}</p>
                </mat-expansion-panel>

                <mat-expansion-panel (opened)="hint2opened = true">
                    <mat-expansion-panel-header>
                        <mat-panel-title>
                            Nápověda 2
                        </mat-panel-title>
                    </mat-expansion-panel-header>
                    <p>{{location.hint2}}</p>
                </mat-expansion-panel>
            </ng-container>

            <div *ngIf="showCorrectAnswerMessage"
                 class="correct-answer">
                Správná odpověď! Můžete přejít k úkolu.
            </div>
            <div *ngIf="showIncorrectAnswerMessage"
                 class="incorrect-answer">
                {{incorrectAnswerMessage}}
            </div>
        </mat-card-content>
        <mat-card-actions>
            <button *ngIf="showAnswerButton"
                    mat-button
                    color="primary"
                    (click)="onAnswerEntered()">Odeslat odpověď</button>
            <button *ngIf="showTaskButton"
                    mat-button
                    color="primary"
                    (click)="onShowTask()">Zobrazit úkol</button>
        </mat-card-actions>
    </mat-card>
</div>

<div *ngIf="!location">Neplatné id lokality</div>